<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# authz

```go
import "github.com/thekrauss/beto-shared/pkg/authz"
```

## Index

- [func KeystoneAuthInterceptor\(validator \*KeystoneValidator\) grpc.UnaryServerInterceptor](<#KeystoneAuthInterceptor>)
- [func KeystoneAuthMiddleware\(validator \*KeystoneValidator, next http.Handler\) http.Handler](<#KeystoneAuthMiddleware>)
- [func RequireRole\(ctx context.Context, role string\) bool](<#RequireRole>)
- [func WithClaims\(ctx context.Context, c \*Claims\) context.Context](<#WithClaims>)
- [type Claims](<#Claims>)
  - [func GetClaims\(ctx context.Context\) \(\*Claims, bool\)](<#GetClaims>)
- [type KeystoneValidator](<#KeystoneValidator>)
  - [func NewKeystoneValidator\(provider \*gophercloud.ProviderClient\) \*KeystoneValidator](<#NewKeystoneValidator>)
  - [func \(k \*KeystoneValidator\) ValidateToken\(ctx context.Context, token string\) \(\*Claims, error\)](<#KeystoneValidator.ValidateToken>)


<a name="KeystoneAuthInterceptor"></a>
## func KeystoneAuthInterceptor

```go
func KeystoneAuthInterceptor(validator *KeystoneValidator) grpc.UnaryServerInterceptor
```

protects gRPC calls

<a name="KeystoneAuthMiddleware"></a>
## func KeystoneAuthMiddleware

```go
func KeystoneAuthMiddleware(validator *KeystoneValidator, next http.Handler) http.Handler
```

protects an HTTP route

<a name="RequireRole"></a>
## func RequireRole

```go
func RequireRole(ctx context.Context, role string) bool
```

collects claims from context

<a name="WithClaims"></a>
## func WithClaims

```go
func WithClaims(ctx context.Context, c *Claims) context.Context
```

injects claims into context

<a name="Claims"></a>
## type Claims



```go
type Claims struct {
    UserID    string
    UserName  string
    ProjectID string
    Project   string
    Roles     []string
}
```

<a name="GetClaims"></a>
### func GetClaims

```go
func GetClaims(ctx context.Context) (*Claims, bool)
```



<a name="KeystoneValidator"></a>
## type KeystoneValidator



```go
type KeystoneValidator struct {
    Provider *gophercloud.ProviderClient
}
```

<a name="NewKeystoneValidator"></a>
### func NewKeystoneValidator

```go
func NewKeystoneValidator(provider *gophercloud.ProviderClient) *KeystoneValidator
```



<a name="KeystoneValidator.ValidateToken"></a>
### func \(\*KeystoneValidator\) ValidateToken

```go
func (k *KeystoneValidator) ValidateToken(ctx context.Context, token string) (*Claims, error)
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
