<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# middleware

```go
import "github.com/thekrauss/beto-shared/pkg/middleware"
```

## Index

- [func AuthMiddleware\(validator \*authz.KeystoneValidator\) func\(http.Handler\) http.Handler](<#AuthMiddleware>)
- [func ErrorHandlerMiddleware\(next http.HandlerFunc\) http.HandlerFunc](<#ErrorHandlerMiddleware>)
- [func GRPCErrorInterceptor\(\) grpc.UnaryServerInterceptor](<#GRPCErrorInterceptor>)
- [func GRPCRateLimitInterceptor\(keyFunc func\(ctx context.Context, req interface\{\}\) string, limit int, window time.Duration\) grpc.UnaryServerInterceptor](<#GRPCRateLimitInterceptor>)
- [func GetRequestID\(ctx context.Context\) string](<#GetRequestID>)
- [func LoggingMiddleware\(next http.Handler\) http.Handler](<#LoggingMiddleware>)
- [func RateLimitMiddleware\(keyFunc func\(r \*http.Request\) string, limit int, window time.Duration\) func\(http.Handler\) http.Handler](<#RateLimitMiddleware>)
- [func RecoveryMiddleware\(next http.Handler\) http.Handler](<#RecoveryMiddleware>)
- [func RequestIDMiddleware\(next http.Handler\) http.Handler](<#RequestIDMiddleware>)


<a name="AuthMiddleware"></a>
## func AuthMiddleware

```go
func AuthMiddleware(validator *authz.KeystoneValidator) func(http.Handler) http.Handler
```

retourne un middleware qui valide les tokens via Keystone

<a name="ErrorHandlerMiddleware"></a>
## func ErrorHandlerMiddleware

```go
func ErrorHandlerMiddleware(next http.HandlerFunc) http.HandlerFunc
```

attrape les erreurs et renvoie un JSON unifié

<a name="GRPCErrorInterceptor"></a>
## func GRPCErrorInterceptor

```go
func GRPCErrorInterceptor() grpc.UnaryServerInterceptor
```

attrape les erreurs et renvoie un gRPC status unifié

<a name="GRPCRateLimitInterceptor"></a>
## func GRPCRateLimitInterceptor

```go
func GRPCRateLimitInterceptor(keyFunc func(ctx context.Context, req interface{}) string, limit int, window time.Duration) grpc.UnaryServerInterceptor
```

applique un rate limit distribué via Redis

<a name="GetRequestID"></a>
## func GetRequestID

```go
func GetRequestID(ctx context.Context) string
```

extrait le RequestID du context

<a name="LoggingMiddleware"></a>
## func LoggingMiddleware

```go
func LoggingMiddleware(next http.Handler) http.Handler
```

logge chaque requête HTTP avec méthode, path, durée, status

<a name="RateLimitMiddleware"></a>
## func RateLimitMiddleware

```go
func RateLimitMiddleware(keyFunc func(r *http.Request) string, limit int, window time.Duration) func(http.Handler) http.Handler
```

limite les requêtes HTTP par clé

<a name="RecoveryMiddleware"></a>
## func RecoveryMiddleware

```go
func RecoveryMiddleware(next http.Handler) http.Handler
```

capture les panic et renvoie une erreur 500

<a name="RequestIDMiddleware"></a>
## func RequestIDMiddleware

```go
func RequestIDMiddleware(next http.Handler) http.Handler
```

injecte un X\-Request\-ID \(corrélation logs/traces\)

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
