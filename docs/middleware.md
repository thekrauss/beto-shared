<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# middleware

```go
import "github.com/thekrauss/beto-shared/pkg/middleware"
```

## Index

- [func AuthMiddleware\(validator \*authz.KeystoneValidator\) func\(http.Handler\) http.Handler](<#AuthMiddleware>)
- [func ErrorHandlerMiddleware\(next http.HandlerFunc\) http.HandlerFunc](<#ErrorHandlerMiddleware>)
- [func GRPCErrorInterceptor\(\) grpc.UnaryServerInterceptor](<#GRPCErrorInterceptor>)
- [func GRPCRateLimitInterceptor\(keyFunc func\(ctx context.Context, req interface\{\}\) string, cfg config.RateLimitConfig\) grpc.UnaryServerInterceptor](<#GRPCRateLimitInterceptor>)
- [func GetRequestID\(ctx context.Context\) string](<#GetRequestID>)
- [func LoggingMiddleware\(next http.Handler\) http.Handler](<#LoggingMiddleware>)
- [func RateLimitMiddleware\(keyFunc func\(r \*http.Request\) string, cfg config.RateLimitConfig\) func\(http.Handler\) http.Handler](<#RateLimitMiddleware>)
- [func RecoveryMiddleware\(next http.Handler\) http.Handler](<#RecoveryMiddleware>)
- [func RequestIDMiddleware\(next http.Handler\) http.Handler](<#RequestIDMiddleware>)


<a name="AuthMiddleware"></a>
## func AuthMiddleware

```go
func AuthMiddleware(validator *authz.KeystoneValidator) func(http.Handler) http.Handler
```

returns middleware that validates tokens via Keystone

<a name="ErrorHandlerMiddleware"></a>
## func ErrorHandlerMiddleware

```go
func ErrorHandlerMiddleware(next http.HandlerFunc) http.HandlerFunc
```

catch errors and return a unified JSON

<a name="GRPCErrorInterceptor"></a>
## func GRPCErrorInterceptor

```go
func GRPCErrorInterceptor() grpc.UnaryServerInterceptor
```

catch errors and return a unified gRPC status

<a name="GRPCRateLimitInterceptor"></a>
## func GRPCRateLimitInterceptor

```go
func GRPCRateLimitInterceptor(keyFunc func(ctx context.Context, req interface{}) string, cfg config.RateLimitConfig) grpc.UnaryServerInterceptor
```

applies a rate limit distributed via Redis

<a name="GetRequestID"></a>
## func GetRequestID

```go
func GetRequestID(ctx context.Context) string
```

extrait le RequestID du context

<a name="LoggingMiddleware"></a>
## func LoggingMiddleware

```go
func LoggingMiddleware(next http.Handler) http.Handler
```

logs each HTTP request with method, path, duration, status

<a name="RateLimitMiddleware"></a>
## func RateLimitMiddleware

```go
func RateLimitMiddleware(keyFunc func(r *http.Request) string, cfg config.RateLimitConfig) func(http.Handler) http.Handler
```

limits HTTP requests per key

<a name="RecoveryMiddleware"></a>
## func RecoveryMiddleware

```go
func RecoveryMiddleware(next http.Handler) http.Handler
```

captures panics and returns an error 500

<a name="RequestIDMiddleware"></a>
## func RequestIDMiddleware

```go
func RequestIDMiddleware(next http.Handler) http.Handler
```

injects an X\-Request\-ID \(logs/traces correlation\)

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
